{"ast":null,"code":"import _defineProperty from\"/Users/christan/Desktop/EYUP/GHPAGES/Voting-application/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/christan/Desktop/EYUP/GHPAGES/Voting-application/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import axios from\"axios\";import App from\"./App\";import{jsx as _jsx}from\"react/jsx-runtime\";var AxiosClient=function AxiosClient(){var _client;var baseUrl=!process.env.NODE_ENV||process.env.NODE_ENV===\"development\"?\"http://localhost:3001\":\"\";var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),token=_useState2[0],changeToken=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),userid=_useState4[0],changeUserId=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),polls=_useState6[0],changePolls=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAdmin=_useState8[0],changeIsAdmin=_useState8[1];var apiCall=function apiCall(method,url,data){return axios({method:method,url:\"\".concat(baseUrl).concat(url),data:data,headers:{authorization:token}}).catch(function(error){throw error;});};var login=function login(loginFormValues){return apiCall(\"post\",\"/user/auth\",loginFormValues);};var signup=function signup(signupFormValues){return apiCall(\"post\",\"/user/newUser\",signupFormValues);};var vote=function vote(pollId,optionIndex){return apiCall('put',\"/polls/vote/\".concat(pollId),{optionIndex:optionIndex});};var getPolls=function getPolls(){return apiCall('get','/polls');};var createPoll=function createPoll(pollFormValues){return apiCall(\"post\",\"/polls/create\",pollFormValues);};var deletePoll=function deletePoll(pollid){return apiCall(\"delete\",\"/polls/\".concat(pollid));};useEffect(function(){if(token!==undefined){getPolls().then(function(_ref){var data=_ref.data;changePolls(data);});}},[token]);var client=(_client={apiCall:apiCall,token:token,changeToken:changeToken,login:login,signup:signup,userid:userid,changeUserId:changeUserId,vote:vote,getPolls:getPolls,polls:polls,changePolls:changePolls,createPoll:createPoll},_defineProperty(_client,\"changePolls\",changePolls),_defineProperty(_client,\"deletePoll\",deletePoll),_defineProperty(_client,\"isAdmin\",isAdmin),_defineProperty(_client,\"changeIsAdmin\",changeIsAdmin),_client);return/*#__PURE__*/_jsx(App,{client:client});};export default AxiosClient;","map":{"version":3,"names":["useEffect","useState","axios","App","AxiosClient","baseUrl","process","env","NODE_ENV","undefined","token","changeToken","userid","changeUserId","polls","changePolls","isAdmin","changeIsAdmin","apiCall","method","url","data","headers","authorization","catch","error","login","loginFormValues","signup","signupFormValues","vote","pollId","optionIndex","getPolls","createPoll","pollFormValues","deletePoll","pollid","then","client"],"sources":["/Users/christan/Desktop/EYUP/GHPAGES/Voting-application/client/src/AxiosClient.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nimport axios from \"axios\";\n\nimport App from \"./App\";\n\nconst AxiosClient = () => {\n  const baseUrl =\n    !process.env.NODE_ENV || process.env.NODE_ENV === \"development\"\n      ? \"http://localhost:3001\"\n      : \"\";\n      \n      const [token, changeToken] = useState(undefined);\n      const [userid, changeUserId] = useState(undefined);\n      const [polls, changePolls] = useState([]);\n      const [isAdmin, changeIsAdmin] = useState(false);\n      \n  const apiCall = (method, url, data) => {\n    return axios({\n      method,\n      url: `${baseUrl}${url}`,\n      data,\n      headers: {\n        authorization: token,\n      },\n    }).catch((error) => {\n      throw error;\n    });\n  };\n\n  const login = (loginFormValues) => {\n    return apiCall(\"post\", \"/user/auth\", loginFormValues);\n  };\n\n  const signup = (signupFormValues) => {\n    return apiCall(\"post\", \"/user/newUser\", signupFormValues)\n  };\n\n  const vote = (pollId, optionIndex) => {\n    return apiCall('put', `/polls/vote/${pollId}`, { optionIndex })\n  }\n\n  const getPolls = () => {\n    return apiCall('get', '/polls');\n  }\n\n  const createPoll = (pollFormValues) => {\n    return apiCall(\"post\", \"/polls/create\", pollFormValues)\n  }\n\n  const deletePoll = (pollid) => {\n    return apiCall(\"delete\", `/polls/${pollid}`)\n  }\n\n\n  useEffect(() => {\n    if (token !== undefined) {\n      getPolls()\n        .then(({ data }) => {\n          changePolls(data);\n        })\n    }\n  }, [token])\n      \n\n  const client = {\n    apiCall,\n    token,\n    changeToken,\n    login,\n    signup,\n    userid,\n    changeUserId,\n    vote,\n    getPolls,\n    polls,\n    changePolls,\n    createPoll,\n    changePolls,\n    deletePoll,\n    isAdmin,\n    changeIsAdmin\n  };\n\n  return <App client={client} />;\n};\n\nexport default AxiosClient;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}